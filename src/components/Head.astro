---
import { ViewTransitions } from 'astro:transitions';
import { useTranslations, getLocalizedUrl } from '@i18n/utils';
import type { Locale } from '@i18n/constants';

interface Props {
  locale?: Locale;
}

const { locale = 'en' } = Astro.props;
const t = useTranslations(locale);
const otherLocale = locale === 'en' ? 'es' : 'en';
const canonicalUrl = new URL(getLocalizedUrl(locale), Astro.site).href;
---

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content={t.meta.description} />
<title>{t.meta.title}</title>

<link rel="icon" href="/favicon.ico" />
<link rel="canonical" href={canonicalUrl} />
<link rel="alternate" hreflang={otherLocale} href={getLocalizedUrl(otherLocale)} />
<link rel="alternate" hreflang={locale} href={getLocalizedUrl(locale)} />
<link rel="sitemap" href="/sitemap-index.xml" />

<!-- Font preloads -->
<link rel="preload" href="/fonts/inter-regular.woff2" as="font" type="font/woff2" crossorigin />
<link rel="preload" href="/fonts/inter-medium.woff2" as="font" type="font/woff2" crossorigin />
<link rel="preload" href="/fonts/inter-semibold.woff2" as="font" type="font/woff2" crossorigin />
<link rel="preload" href="/fonts/firacode-regular.woff2" as="font" type="font/woff2" crossorigin />

<!-- Open Graph -->
<meta property="og:title" content={t.meta.title} />
<meta property="og:description" content={t.meta.description} />
<meta property="og:type" content="website" />
<meta property="og:image" content={t.meta.ogImage} />
<meta property="og:url" content={canonicalUrl} />
<meta property="og:locale" content={locale === 'es' ? 'es_ES' : 'en_US'} />
<meta property="og:locale:alternate" content={otherLocale === 'es' ? 'es_ES' : 'en_US'} />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={t.meta.title} />
<meta name="twitter:description" content={t.meta.description} />
<meta name="twitter:image" content={t.meta.ogImage} />

<ViewTransitions />
